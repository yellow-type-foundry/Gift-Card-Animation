/* Header background theming: darken on hover */
[data-name="Gift Card"]:hover [data-name="HeaderBGBase"] {
  filter: brightness(.9) saturate(1);
  background: none;
}

/* Exclude SentCard4 (sent-single) from hover dimming */
[data-card-type="sent-single"]:hover [data-name="HeaderBGBase"] {
  filter: none;
  background: none;
}

/* Monochrome variant hover gradient */
[data-variant="mono"][data-name="Gift Card"]:hover [data-name="HeaderBGBase"] {
  filter: none;
  background: linear-gradient(180deg, #E0E4EB 0%, #F3F4F7 100%);
}
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Card hover shadow (applies to SentCard container with data-name="Gift Card") */
[data-name="Gift Card"] {
  transition: transform 200ms ease-out, box-shadow 200ms ease-out;
  will-change: transform, box-shadow;
  transform: translateY(0);
  box-shadow: none;
}
[data-name="Gift Card"]:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px -8px rgba(0, 0, 0, 0.08), 0 2px 8px -4px rgba(0, 0, 0, 0.05);
}

/* Disable hover lift and shadow when 3D animation is active */
[data-name="Gift Card"][data-animation-type="3d"]:hover {
  transform: translateY(0);
  box-shadow: none;
}

/* (progress styles are in component; no reminder button global styles) */
/* Font Face Declarations */
@font-face {
  font-family: 'Goody Sans';
  src: url('/assets/Goody_Sans-Regular.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Goody Sans';
  src: url('/assets/Goody_Sans-Medium.otf') format('opentype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Goody Sans';
  src: url('/assets/Goody_Sans-Semibold.otf') format('opentype');
  font-weight: 600;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Goody Sans';
  src: url('/assets/Goody_Sans-Bold.otf') format('opentype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'HW Cigars';
  src: url('/assets/HW Cigars Regular.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@layer base {
  html {
    overflow-y: hidden;
    height: 100%;
  }
  
  body {
    margin: 0;
    font-family: 'Goody Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
      sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-y: hidden;
    height: 100%;
  }
  
  /* Design tokens from Figma */
  :root {
    --color-content-secondary: #525F7A;
    --color-content-primary: #000000;
    --color-content-tertiary: #7B8AA7;
    --color-background-primary: #FFFFFF;
    --color-background-secondary: #F0F1F5;
    --color-border: #DDE2E9;
    --color-button-primary: #7F53FD;
    --color-button-primary-border: #6935FD;
    --color-gift-wrap: #FF9E9E;
    --font-goody-sans: 'Goody Sans', sans-serif;
    --font-hw-cigars: 'HW Cigars', serif;
  }
}

@layer utilities {
  /* Text Styles from Figma */
  
  /* Body/L - Goody Sans Regular, 16px, line-height 1.4 */
  .text-body-l {
    font-family: var(--font-goody-sans);
    font-size: 16px;
    font-weight: 400;
    line-height: 1.4;
  }
  
  /* Body/M (B) - Goody Sans Medium, 14px, line-height 1.4 */
  .text-body-m-bold {
    font-family: var(--font-goody-sans);
    font-size: 14px;
    font-weight: 500;
    line-height: 1.4;
  }
  
  /* Body/L (B) - Goody Sans Medium, 16px, line-height 1.4 */
  .text-body-l-bold {
    font-family: var(--font-goody-sans);
    font-size: 16px;
    font-weight: 500;
    line-height: 1.4;
  }
  
  /* Message Text - HW Cigars Regular, 24px, line-height 1.2, tracking -0.36px */
  .text-message {
    font-family: var(--font-hw-cigars);
    font-size: 24px;
    font-weight: 400;
    line-height: 1.2;
    letter-spacing: -0.36px;
  }

  /* Gift Card Grid */
  .gift-card-grid {
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    grid-template-rows: repeat(2, auto);
    grid-auto-rows: 0;
    overflow: hidden;
    justify-items: stretch;
  }

  @media (min-width: 768px) {
    .gift-card-grid {
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      grid-template-rows: repeat(2, auto);
      grid-auto-rows: 0;
      overflow: hidden;
    }
  }

  @media (min-width: 1024px) {
    .gift-card-grid {
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      grid-template-rows: repeat(2, auto);
      grid-auto-rows: 0;
      overflow: hidden;
    }
  }

}

/* Grid cell breathing animation on hover */
@keyframes grid-breathe-base {
  0% { opacity: 0.16; }
  50% { opacity: 0.38; }
  100% { opacity: 0.16; }
}
@keyframes grid-breathe-overlay {
  0% { opacity: 0.10; }
  50% { opacity: 0.00; }
  100% { opacity: 0.10; }
}

/* Trigger animation only when hovering the Image Container block */
[data-name="Envelope"] .grid-cell-base,
[data-name="Box1"] .grid-cell-base { opacity: 0.2; will-change: opacity; }
[data-name="Envelope"] .grid-cell-overlay,
[data-name="Box1"] .grid-cell-overlay { opacity: 0.10; will-change: opacity; }
/* Restore breathing on hover */
[data-name="Envelope"]:hover .grid-cell-base,
[data-name="Box1"]:hover .grid-cell-base,
[data-name="Gift Card"]:hover .grid-cell-base {
  animation-name: grid-breathe-base;
  animation-duration: 1000ms;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
  animation-direction: normal;
}
[data-name="Envelope"]:hover .grid-cell-overlay,
[data-name="Box1"]:hover .grid-cell-overlay,
[data-name="Gift Card"]:hover .grid-cell-overlay {
  animation-name: grid-breathe-overlay;
  animation-duration: 1000ms;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
  animation-direction: normal;
}

/* Staggered delays for a gentle wave */
.gc-1 { animation-delay: 420ms; }
.gc-2 { animation-delay: 30ms; }
.gc-3 { animation-delay: 780ms; }
.gc-4 { animation-delay: 210ms; }
.gc-5 { animation-delay: 1260ms; }
.gc-6 { animation-delay: 540ms; }
.gc-7 { animation-delay: 960ms; }
.gc-8 { animation-delay: 1170ms; }

/* Vary animation durations per cell for more organic breathing */
.gc-1 { animation-duration: 2050ms; animation-direction: alternate; animation-timing-function: ease-in-out; }
.gc-2 { animation-duration: 2650ms; animation-direction: alternate-reverse; animation-timing-function: ease-in; }
.gc-3 { animation-duration: 1850ms; animation-direction: alternate; animation-timing-function: ease-out; }
.gc-4 { animation-duration: 2850ms; animation-direction: alternate-reverse; animation-timing-function: ease-in-out; }
.gc-5 { animation-duration: 2150ms; animation-direction: alternate; animation-timing-function: ease-in; }
.gc-6 { animation-duration: 2950ms; animation-direction: alternate-reverse; animation-timing-function: ease-out; }
.gc-7 { animation-duration: 1950ms; animation-direction: alternate; animation-timing-function: ease-in-out; }
.gc-8 { animation-duration: 2550ms; animation-direction: alternate-reverse; animation-timing-function: ease; }

/* Batch 2 Grid Cell Opacity - increased by 0.3 from Batch 1 */
@keyframes grid-breathe-base-batch2 {
  0% { opacity: 0.66; }
  50% { opacity: 0.88; }
  100% { opacity: 0.66; }
}
@keyframes grid-breathe-overlay-batch2 {
  0% { opacity: 0.60; }
  50% { opacity: 0.50; }
  100% { opacity: 0.60; }
}

/* Batch 2 default opacity (increased by 0.3) */
[data-name="Box Container/Batch 2"] .grid-cell-base { opacity: 0.5; will-change: opacity; }
[data-name="Box Container/Batch 2"] .grid-cell-overlay { opacity: 0.4; will-change: opacity; }

/* Disable breathing animation for done cards */
[data-name="Box Container/Batch 2"][data-is-done="true"]:hover .grid-cell-base,
[data-name="Gift Card"]:has([data-name="Box Container/Batch 2"][data-is-done="true"]):hover .grid-cell-base {
  animation: none !important;
}
[data-name="Box Container/Batch 2"][data-is-done="true"]:hover .grid-cell-overlay,
[data-name="Gift Card"]:has([data-name="Box Container/Batch 2"][data-is-done="true"]):hover .grid-cell-overlay {
  animation: none !important;
}

/* Batch 2 hover breathing animation (increased by 0.3) - only for undone cards */
[data-name="Box Container/Batch 2"]:not([data-is-done="true"]):hover .grid-cell-base,
[data-name="Gift Card"]:has([data-name="Box Container/Batch 2"]:not([data-is-done="true"])):hover .grid-cell-base {
  animation-name: grid-breathe-base-batch2;
  animation-duration: 500ms;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
  animation-direction: normal;
}
[data-name="Box Container/Batch 2"]:not([data-is-done="true"]):hover .grid-cell-overlay,
[data-name="Gift Card"]:has([data-name="Box Container/Batch 2"]:not([data-is-done="true"])):hover .grid-cell-overlay {
  animation-name: grid-breathe-overlay-batch2;
  animation-duration: 1000ms;
  animation-timing-function: ease-in-out;
  animation-iteration-count: infinite;
  animation-direction: normal;
}

/* Settings button pop-up animation */
@keyframes settings-pop-up {
  0% {
    opacity: 0;
    transform: scale(0.5) translateY(20px);
  }
  60% {
    transform: scale(1.05) translateY(-2px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.settings-button-enter {
  animation: settings-pop-up 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Settings menu pop-up animation */
@keyframes settings-menu-pop {
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(10px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.settings-menu-enter {
  animation: settings-menu-pop 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Controls fade-in animation */
@keyframes controls-fade-in {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

.controls-fade-in {
  opacity: 0;
  animation: controls-fade-in 0.1s ease-in-out forwards;
}

/* Single 2 metal surface highlight animation */
@keyframes metal-shine {
  0% {
    transform: translateX(-100%) translateY(-100%);
  }
  100% {
    transform: translateX(100%) translateY(100%);
  }
}

@keyframes metal-shine-trail {
  0% {
    transform: translateX(-100%) translateY(-100%);
  }
  100% {
    transform: translateX(100%) translateY(100%);
  }
}

.metal-shine-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
  overflow: hidden;
  border-radius: inherit;
}

[data-name="Box"][data-animation-type="highlight"]:hover .metal-shine-overlay,
[data-animation-type="highlight"]:hover .metal-shine-overlay {
  opacity: 1;
}

.metal-shine-gradient {
  will-change: transform;
}

.metal-shine-trail {
  will-change: transform;
}

[data-name="Box"][data-animation-type="highlight"]:hover .metal-shine-gradient,
[data-animation-type="highlight"]:hover .metal-shine-gradient {
  animation: metal-shine 1.55s ease-out; /* Adjust duration (1.5s) and easing (ease-in-out) to control pacing */
}

[data-name="Box"][data-animation-type="highlight"]:hover .metal-shine-trail,
[data-animation-type="highlight"]:hover .metal-shine-trail {
  animation: metal-shine-trail 0.6s ease-out 0.3s; /* Faster trailing gradient, starts 0.3s after the first */
}

/* Breathing animation for Single 2 box */
@keyframes breathing-1 {
  0%, 100% {
    transform: translate(-50%, -50%) rotate(0deg) scale(.9);
  }
  50% {
    transform: translate(-50%, -50%) rotate(15deg) scale(1.15);
  }
}

@keyframes breathing-2 {
  0%, 100% {
    transform: translate(-50%, -50%) rotate(0deg) scale(.8);
  }
  50% {
    transform: translate(-50%, -50%) rotate(-15deg) scale(1.05);
  }
}

.breathing-box-duplicate {
  will-change: opacity, transform;
  animation-fill-mode: none;
}

[data-name="Gift Card"]:hover .breathing-box-1 {
  animation: breathing-1 2s ease-in-out infinite;
}

[data-name="Gift Card"]:hover .breathing-box-2 {
  animation: breathing-2 1.75s ease-in-out infinite;
}

/* Breathing animation for envelope duplicates */
.breathing-envelope-duplicate {
  will-change: opacity, transform;
  animation-fill-mode: none;
}

[data-name="Gift Card"]:hover .breathing-envelope-1 {
  animation: breathing-1 2s ease-in-out infinite;
}

[data-name="Gift Card"]:hover .breathing-envelope-2 {
  animation: breathing-2 1.75s ease-in-out infinite;
}

/* Logo breathing animation for undone Single 2 cards - only on hover */
/* Removed: Logo breathing animation - replaced with progress bar dots */
/*
[data-name="Gift Card"]:hover .logo-breathing {
  animation: logo-breathe 2s ease-in-out infinite;
}

@keyframes logo-breathe {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}
*/

/* Progress bar shimmer animation for undone cards - only on hover */
@keyframes progress-shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.progress-shimmer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.3) 50%,
    transparent 100%
  );
  pointer-events: none;
  border-radius: inherit;
  opacity: 0.9;
  mix-blend-mode: overlay;
  transition: opacity 0.3s ease-out;
  z-index: 2;
  filter: blur(3px);
}

[data-name="Gift Card"]:hover .progress-shimmer {
  opacity: 1;
  animation: progress-shimmer 2s ease-out infinite;
}

/* All Accepted text glow animation on hover */
.all-accepted-text {
  transition: text-shadow 0.6s ease-out, opacity 0.6s ease-out;
  text-shadow: 0 0 0px rgba(255, 255, 255, 0);
  opacity: 1;
}

[data-name="Gift Card"]:hover .all-accepted-text {
  animation: all-accepted-glow 5s ease-in-out infinite;
  text-shadow: 0 0 8px rgba(255, 255, 255, 0.8), 0 0 16px rgba(255, 255, 255, 0.8);
}

@keyframes all-accepted-glow {
  0%, 100% {
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.8), 0 0 16px rgba(255, 255, 255, 0.8);
  }
  50% {
    text-shadow: 0 0 16px rgba(255, 255, 255, 1), 0 0 32px rgba(255, 255, 255, 1), 0 0 48px rgba(255, 255, 255, 1);
  }
}

/* Done progress bar glow animation on hover */
.done-progress-bar {
  transition: box-shadow 0.6s ease-out, filter 0.6s ease-out;
  box-shadow: 0 0 0px rgba(255, 255, 255, 0);
  filter: brightness(1);
}

[data-name="Gift Card"]:hover .done-progress-bar {
  animation: done-progress-bar-glow 5s ease-in-out infinite;
  box-shadow: 0 0 8px rgba(255, 255, 255, 0.4), 0 0 16px rgba(255, 255, 255, 0.3);
  filter: brightness(1);
}

@keyframes done-progress-bar-glow {
  0%, 100% {
    box-shadow: 0 0 8px rgba(255, 255, 255, 0.4), 0 0 16px rgba(255, 255, 255, 0.3);
    filter: brightness(1);
  }
  50% {
    box-shadow: 0 0 16px rgba(255, 255, 255, 0.6), 0 0 32px rgba(255, 255, 255, 0.5), 0 0 48px rgba(255, 255, 255, 0.4);
    filter: brightness(1.1);
  }
}

/* CRITICAL: Pause all animations when ShareModal is open */
/* This must be in globals.css to have proper specificity and override hover-based animations */
body.share-modal-open [data-name="Gift Card"]:hover .grid-cell-base,
body.share-modal-open [data-name="Gift Card"]:hover .grid-cell-overlay,
body.share-modal-open [data-name="Envelope"]:hover .grid-cell-base,
body.share-modal-open [data-name="Envelope"]:hover .grid-cell-overlay,
body.share-modal-open [data-name="Box Container/Batch 2"]:hover .grid-cell-base,
body.share-modal-open [data-name="Box Container/Batch 2"]:hover .grid-cell-overlay,
body.share-modal-open [data-name="Gift Card"]:hover .breathing-box-1,
body.share-modal-open [data-name="Gift Card"]:hover .breathing-box-2,
body.share-modal-open [data-name="Gift Card"]:hover .breathing-envelope-1,
body.share-modal-open [data-name="Gift Card"]:hover .breathing-envelope-2,
body.share-modal-open [data-name="Box"]:hover .metal-shine-gradient,
body.share-modal-open [data-name="Box"]:hover .metal-shine-trail,
body.share-modal-open [data-name="Gift Card"]:hover .progress-shimmer,
body.share-modal-open [data-name="Gift Card"]:hover .all-accepted-text,
body.share-modal-open [data-name="Gift Card"]:hover .done-progress-bar {
  animation: none !important;
}

/* Also pause all animations on all elements when modal is open */
body.share-modal-open *:not([data-share-modal]):not([data-share-modal] *),
body.share-modal-open *:not([data-share-modal]):not([data-share-modal] *)::before,
body.share-modal-open *:not([data-share-modal]):not([data-share-modal] *)::after {
  animation: none !important;
  transition: none !important;
}

/* Reset transforms on cards */
body.share-modal-open [data-name="Gift Card"]:not([data-share-modal]) {
  transform: translateY(0) !important;
  box-shadow: none !important;
}

/* StylingBar positioning - 40px gap from card grid */
.styling-bar-position {
  left: max(40px, calc((100vw - min(100vw, 1440px)) / 2 + 0px - 88px));
}

@media (min-width: 768px) {
  .styling-bar-position {
    left: calc((100vw - min(100vw, 1440px)) / 2 + 80px - 88px);
  }
}

@media (min-width: 1024px) {
  .styling-bar-position {
    left: calc((100vw - min(100vw, 1440px)) / 2 + 240px - 88px);
  }
}

/* StylingBar tooltips */
.styling-bar-tooltip {
  position: relative;
}

.styling-bar-tooltip::after {
  content: attr(data-tooltip);
  position: absolute;
  right: calc(100% + 12px);
  top: 50%;
  transform: translateY(-50%);
  background-color: #1f2937;
  color: white;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease-in-out;
  z-index: 100;
  font-family: 'Goody Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
}

.styling-bar-tooltip:hover::after {
  opacity: 1;
}

/* Hide tooltip when menu is open */
.styling-bar-tooltip[data-menu-open]::after {
  opacity: 0 !important;
}

/* Remove all focus rings from StylingBar buttons */
.styling-bar-tooltip:focus,
.styling-bar-tooltip:focus-visible,
.styling-bar-tooltip:active {
  outline: none !important;
  box-shadow: none !important;
}

/* Shuffle button icon rotation animation */
@keyframes shuffle-rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.shuffle-icon-rotate {
  animation: shuffle-rotate 600ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Context menu fade-in animation */
@keyframes context-menu-fade-in {
  from {
    opacity: 0;
    transform: translateY(-50%) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translateY(-50%) scale(1);
  }
}

.context-menu-enter {
  animation: context-menu-fade-in 200ms cubic-bezier(0.16, 1, 0.3, 1);
  transform-origin: right center;
}
